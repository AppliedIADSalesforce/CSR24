<html>
  <head>

	<link rel="stylesheet" href="https://appliedsystems--park.sandbox.lightning.force.com/resource/enchat__AdvancedMessagingResources/css/EmbeddedServiceStyles.css"/>
	  
	<title>Park Enhanced CSR24 Einstein Bot Test PageX</title>
    <style>
      h1 {
        text-align: center;
      }
    </style>
  </head>
  <body>

	 <h1>
      Welcome to the Park New Enhanced CSR24 EN/FR Einstein Bot Chat Test Page!
    </h1>
    <p>Please refer to the chat button in the bottom right corner.</p>
    <div>
      <h2>Please refer to the chat button in the bottom right corner</h2>
    </div>

	  
<script type='text/javascript'>
		
	const queryString = window.location.search;
      //console.log('QUERY STRING: ' & queryString);
      const urlParams = new URLSearchParams(queryString);

      const fName = urlParams.get("fname");
      console.log("First Name: " + fName);

      const lName = urlParams.get("lname");
      console.log("Last Name: " + lName);

      const eMail = urlParams.get("email");
      console.log("Email: " + eMail);

      const uLanguage = urlParams.get("lang");
      console.log("Language: " + uLanguage);

	src="https://appliedsystems--park.sandbox.lightning.force.com/lightning/lightning.out.js"
	
	function initEmbeddedMessaging() {
		try {
			embeddedservice_bootstrap.settings.language = uLanguage; // For example, enter 'en' or 'en-US'
			//embedded_svc.settings.externalStyles = ["NF_Applied_Assistant_CSS"];
			embeddedservice_bootstrap.settings.externalStyles = ["NF_Applied_Assistant_CSS"];
			
			 window.addEventListener("onEmbeddedMessagingReady", () => {
            //log event
            console.log("onEmbeddedMessagingReady started");

				 	 //set visible prechat field
            embeddedservice_bootstrap.prechatAPI.setHiddenPrechatFields({
              pcFirstName: fName,
              pcLastName: lName,
              pcEmail: eMail,
              UserLanguage: uLanguage,
            });		
			});
				          			
			embeddedservice_bootstrap.init(
				'00DO100000BAOKd',
				'CSR24',
				'https://appliedsystems--park.sandbox.my.site.com/ESWCSR241755283291999',
				{
					scrt2URL: 'https://appliedsystems--park.sandbox.my.salesforce-scrt.com'
				}
			);
		} catch (err) {
			console.error('Error loading Embedded Messaging: ', err);
		}
	};	

	 if (!window.embeddedservice_bootstrap) {
        var s = document.createElement("script");
        s.setAttribute(
          "src",
          "https://appliedsystems--park.sandbox.my.site.com/ESWCSR241755283291999/assets/js/bootstrap.min.js"
        );

		src="https://appliedsystems--park.sandbox.lightning.force.com/resource/enchat__AdvancedMessagingResources/js/emcSupportClient.js"
		src="https://appliedsystems--park.sandbox.lightning.force.com/resource/enchat__AdvancedMessagingResources/js/Lightbox.js"

		src="https://appliedsystems--park.sandbox.lightning.force.com/resource/enchat__AdvancedMessagingResources/js/enhancedchat.js"
		 
        s.onload = function () {
          initEmbeddedMessaging();
        };
        document.body.appendChild(s);
      }
	
</script>
<!-- <script type='text/javascript' src='https://appliedsystems--park.sandbox.my.site.com/ESWCSR241755283291999/assets/js/bootstrap.min.js' onload='initEmbeddedMessaging()'></script> -->

</body>
</html>
